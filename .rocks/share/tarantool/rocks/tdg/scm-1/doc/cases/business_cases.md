# Технические функции

|Ключ функции|Имя функции|
|---|---|
| #117       |    Фильтрация по параметрам объекта                   |
| #116, #117 |    Фильтрация по параметрам "приджойненного" объекта  |
| #80        |    Отбор части временнОго массива                     |
| #116       |    JOIN объектов                                      |
|Ф5|	Фильтрация по историческим данным|
|Ф6|	Запрос архивных данных|
|Ф7| Фильтрация по списку ключей|
|Ф8| Построение агрегированных значений в запросе|
| #77, #95   |    Создание представлений                             |
|Ф11|	Модифицирование объектной модели|
| #109       |    Кластеризация                                      |

________________________________________
# Бизнес-кейсы
## Бизнес-архитектор (__БА__)
### БА6. Комбинирование разных сущностей в запросе
***Затронутые задачи: #117, #116, #77, #95***

_Контекст._ Проверяется возможность комбинирования в запросе данных связанных между собой бизнес-сущностей. Под бизнес-сущностями, связанными со сделками, понимаются такие объекты, как, например:
*	Объект события Initiation;
*	Сгенерированные при создании объекты бизнес-событий выплаты процентов;
*	Сгенерированные при создании сделки технические бизнес-события EndOfDay по сделке от даты создания до даты завершения (эти события пересчитывают на каждый день проценты, накопленные в режиме Accrual Accounting)
*	Обязательства, привязанные ко всем созданным бизнес-событиям
*	И т.д.

_Решение._ Для проведения такой проверки в Транзакционном ядре должен находится заранее подготовленный набор сделок (реальных или синтетических), а также набор связанных с каждой сделкой бизнес-сущностей. Требуется возможность отобрать все бизнес-события и обязательства, связанные с любой сделкой.

_Алгоритм проверки._ Оценивается полнота комплекта выгруженных сущностей, связанных с каждой сделкой из тестового набора.

### БА7. Комбинирование справочных данных и данных по сделкам
***Затронутые задачи: #117, #116, #77, #95***

_Контекст._ Проверяется возможность комбинирования в запросе данных по сделке и справочных данных. Примером справочных данных могут являться атрибуты инструмента, соглашения, участника и т.д. Здесь под участником понимается контрагент либо брокер и т.д.; сделки разных типов включают разное число участников любого вида.

_Решение._ Для проведения такой проверки в Транзакционном ядре должен находится заранее подготовленный набор сделок (реальных или синтетических), а также набор справочных данных. Справочные данные должны содержать, в том числе, признаки санкционности (в случае участника и инструмента), страны регистрации (в случае участника), страны-эмитента (в случае инструмента) и другие. Требуется возможность отобрать сделки по различным признакам, комбинирующим данные по сделкам и справочные данные.

_Алгоритм проверки._ Оценивается правильность выполнения следующих запросов к данным транзакционного ядра:
*	Запрос 1: вернуть страну регистрации каждого участника всех сделок с инструментами, эмитентом которых выступает российская компания;
*	Запрос 2: отобрать список сделок со всеми атрибутами, в которых на дату регистрации сделки (и проверки комплайенсом) хотя бы один из участников не являлся резидентом;
*	Запрос 3: отобрать все сделки, в которых на дату заключения хотя бы один из Контрагентов находился в санкционном списке;
*	Запрос 4: отобрать все сделки и весь комплект связанных сущностей (бизнес-события и обязательства), в которых на дату заключения хотя бы один из Контрагентов находился в санкционном списке (реализация кейса «комбинирование разных сущностей в запросе» является обязательным пререквизитом);
*	Запрос 5: отобрать все обязательства по сделкам, признаваемым ПФИ (реализация кейса «комбинирование разных сущностей в запросе» является обязательным пререквизитом).

### БА8. Проверка возможности работы с разнородными выборками данных
***Затронутые задачи: #Ф5, #Ф7, #77, #95***

_Контекст._ Проверяется возможность работы с разнородными данными транзакционного ядра. Поскольку сделки могут быть разного вида (форварда, репо и проч.), выборка из сделок разного типа должна содержать коллекцию объектов с разным составом атрибутов. К каждому объекту должен прилагаться универсальный идентификатор объектной модели, с помощью которой данные могут быть прочитаны потребителем.

_Решение._ Для проведения такой проверки в Транзакционном ядре должен находится заранее подготовленный набор сделок (реальных или синтетических) разного типа, характеризующийся достаточным разнообразием параметров (с указанием разметки ФО/БО).

_Алгоритм проверки._ Оценивается правильность выполнения следующих запросов к данным транзакционного ядра:
*	Запрос 1: отобрать все сделки профит-центра Д05 за прошедшую неделю, с указанием идентификатора объектной модели каждой сделки;
*	Запрос 2: отобрать только ФО-параметры событий Initiation сделок профит-центра Д05 за предыдущий рабочий день, с указанием идентификатора объектной модели каждой сделки (реализация кейса «комбинирование разных сущностей в запросе» является обязательным пререквизитом);

### БА9. Проверка интегрированности данных различных систем-источников
***Затронутые задачи: #117, #116, #80, #Ф5***

_Контекст._ Проверяется возможность работы с данными транзакционного ядра, пришедшими из разных систем-источников.

_Решение._ Для проведения такой проверки в Транзакционном ядре должен находится заранее подготовленный набор сделок (реальных или синтетических) разного типа, характеризующийся достаточным разнообразием параметров (с указанием разметки ФО/БО), пришедших из различных систем-источников (по крайней мере, трёх).

_Алгоритм проверки._ Оценивается правильность выполнения следующих запросов к данным транзакционного ядра:
*	Запрос 1: отобрать данные по всем сделкам Spot/Fwd за предыдущий рабочий день;
*	Запрос 2: отобрать все сделки указанного клиента, у которого есть операции с Д05, АД и конвертации на форексе;
*	Запрос 3: отобрать все сделки с Тестовым Инструментом, операции с которым есть у Д02 и АД.

### БА10. Проверка механизма работы с историчными данными
***Затронутые задачи: #117, #116, #80, #Ф5, #Ф6***

_Решение._ Для проведения такой проверки в Транзакционном ядре должен находится заранее подготовленный набор сделок (реальных или синтетических), характеризующийся достаточным разнообразием параметров, комплект бизнес-событий, изменяющих какой-либо параметр этой сделки, а также обязательства по сделкам.

_Алгоритм проверки._ Оценивается правильность выполнения следующих запросов к данным транзакционного ядра:
*	Запрос 1: Рассмотрим сделку Кредита. Требуется вернуть все бизнес-события и обязательства по сделке на произвольную дату в течение ее жизненного цикла. Состав возвращаемых данных должен меняться (по сценарию у нас появляются новые бизнес-события)
*	Запрос 2: Рассмотрим сделку Кредита, заведенную для Кейса 2. Требуется вернуть серии значений основного долга и суммы накопленных процентов за период времени с T1 до T2 в течение периода жизненного цикла сделки.
*	Запрос 4: Требуется отобрать список уполномоченных лиц контрагентов по сделке, актуальный на заданную дату. (список уполномоченных лиц контрагента может меняться, и здесь мы проверяем, что историчность реализована и для справочника контрагентов тоже).
*	Запрос 5: Требуется отобрать список сделок (ID и дату заключения) с облигациями, находящимися на заданную дату в дефолте. (Здесь мы проверяем, что историчность реализована в том числе и для инструментов)

### БА11. Проверка механизма работы с данными бизнес-аудита
***Затронутые задачи: #117, #116, #80, #Ф5, #Ф6***

_Контекст._ Журнал бизнес-аудита хранится в транзакционном ядре и содержит данные о системных действиях, совершенных в системе-источнике в рамках какого-либо бизнес-процесса. Данные заполняются системой происхождения и содержат следующую информацию:
*	данные пользователя, запустившего действие
*	объект, над которым совершается бизнес-процесс (UID, название типа)
*	состояние объекта в рамках схемы STP, в котором выполняется действие
*	time stamp записи
*	т.д. (описано в требованиях)

_Решение._ Для проведения такой проверки в Транзакционном ядре должен находится заранее подготовленный набор сделок (реальных или синтетических), характеризующийся достаточным разнообразием параметров, а также требуются два важных пререквизита:
*	В системах источниках реализован механизм фиксации и отправки в ТЯ данных бизнес-аудита (большое количество доработок на стороне legacy-систем);
*	В транзакционном ядре реализован журнал бизнес-аудита.

_Алгоритм проверки._ Оценивается правильность выполнения следующих запросов к данным транзакционного ядра:
*	Запрос 1: Требуется вернуть версию кредитной сделки в том виде, какой она была на какой-либо момент времени со всеми ее атрибутами.
*	Запрос 2: Требуется вернуть данные бизнес-аудита по всем сотрудникам и их бизнес-роли, которые хоть как-то имели отношение к совершению сделок с Банком ПЕРЕСВЕТ

________________________________________

## Business-logic & Dashboard (__БЛ__)
### Пререквизиты к кейсам:
В транзакционное ядро должен быть загружен набор тестовых сделок (10 000 штук). Сделки данного набора должны обеспечивать максимально возможную репрезентативность, обладая следующими признаками:
*	2 типа сделок (депозит, форвард); если будет готово описание других типов сделок - они также могут быть добавлены в кейсы
*	50 типов инструментов (10 валютных пар, 20 облигаций, 20 акций);
*	2 системы-источника (ФОКУС, OPICS);
*	1000 контрагентов;
*	3 типа соглашений (ISDA, RISDA, BSA);

При этом:
*	Требуется наличие целевой модели, чтобы загружать в неё тестовый набор сделок, причем параметры должны иметь маркировку ФО/БО;
*	Требуется наличие маппинга из модели систем-источников в целевую модель;
*	В тестовом наборе должны быть контрагенты с несколькими соглашениями;

Каждая сделка из тестового набора представляет собой конечный результат сообщений об этой сделке, которые также вносятся в ядро, причем должны присутствовать следующие сообщения:
*	сообщения с параметрами, которые заполняет Фронт-офис
*	сообщения с параметрами, которые заполняет Бэк-офис
*	сообщения с параметрами статусов Авторизации, Не авторизации, Отмены (фронтофисные статусы, рисковые статусы, бэкофисные статусы).
*	сообщения об изменении параметров сделки

В изложенных ниже кейсах описываются способы, посредством которых требуется получать из Ядра внесенные данные.

### БЛ1. Построение отчета по контрагенту
***Затронутые задачи: #117, #116, #77, #95***

_Контекст._ Изложен выше в пререквизитах.
_Решение._ Требуется возможность осуществить запрос к данным транзакционного ядра, отбирающий ФО и БО параметры (с указанием этой разметки) таких сделок:
*	в которых участвует указанный контрагент и/или
*	которые заключены в рамках соглашения выбранного типа и/или
*	которые заключены с инструментами, заданными из списка и/или
*	у которых бэкофисный статус имеет указанное значение.

_Алгоритм проверки._ Осуществляется запрос к данным транзакционного ядра, отбирающий сделки по выбранному признаку(ам). Затем производится фильтрация и группировка вышеупомянутого набора тестовых сделок (например, в Excel) соответствующим образом. Результат выполнения запроса к данным ядра и результат фильтрации и группировки тестового набора сделок должны совпадать.

### БЛ2. Построение отчета по инструменту
***Затронутые задачи: #117, #116, #Ф7, #77, #95***

_Контекст._ Изложен выше в пререквизитах.
_Решение._ Требуется возможность осуществить запрос к данным транзакционного ядра, отбирающий ФО и БО параметры (с указанием этой разметки) таких сделок:
*	которые заключены с инструментами, заданными из списка и/или
*	которые имеют заданную систему-источник и/или
*	цена которых попадает в указанный диапазон в окрестности заданного значения, зависящего от типа соглашения.
(пример запроса: вывести все сделки заключенные через Focus, цена сделки которых отклоняется не более чем на 10 % от референсного значения для каждого инструмента из списка (AlfaRu, Gazpru, VTB 25, AFK.RU, SBER.LI) по типу соглашения ISDA)

_Алгоритм проверки._ Осуществляется запрос к данным транзакционного ядра, отбирающий сделки по выбранному признаку(ам). Затем производится фильтрация и группировка вышеупомянутого набора тестовых сделок (например, в Excel) соответствующим образом. Результат выполнения запроса к данным ядра и результат фильтрации и группировки тестового набора сделок должны совпадать.

### БЛ3. Построение отчета в разрезе срочности сделок
***Затронутые задачи: #117, #116, #Ф7, #77, #95***

_Контекст._ Изложен выше в пререквизитах.

_Решение._ Требуется возможность осуществить запрос к данным транзакционного ядра, отбирающий ФО параметры таких сделок:
*	у которых процентная ставка задается в зависимости от типа соглашения, типа сделки и срочности сделки и/или
*	у которых риск-статус имеет установленное значение.
(пример запроса: вывести все сделки, заключенные под соглашением ISDA, у которых процентная ставка больше референсного значения (реф. значение - это какая-либо ставка, взятая для сравнения, например ставка libor), а также сделки, заключенные под соглашением RISDA, у которых процентная ставка меньше референсного значения)

_Алгоритм проверки._ Осуществляется запрос к данным транзакционного ядра, отбирающий сделки по выбранному признаку(ам). Затем производится фильтрация и группировка вышеупомянутого набора тестовых сделок (например, в Excel) соответствующим образом. Результат выполнения запроса к данным ядра и результат фильтрации и группировки тестового набора сделок должны совпадать.

### БЛ4. Построение отчета об изменении статусов сделок
***Затронутые задачи: #Ф5, #Ф6, #77, #95***

_Контекст._ Изложен выше в пререквизитах.

_Решение._ Требуется возможность осуществить запрос к данным транзакционного ядра, отбирающий ФО и БО параметры (с указанием этой разметки) таких сделок, по которым не приходили сообщения об отмене авторизации какой-либо ролью, и у которых менялся фронтофисный/рисковый/бэкофисный статус заданное число раз.

_Алгоритм проверки._ Осуществляется запрос к данным транзакционного ядра, отбирающий сделки по выбранному признаку(ам). Затем производится фильтрация и группировка вышеупомянутого набора тестовых сделок (например, в Excel) соответствующим образом. Результат выполнения запроса к данным ядра и результат фильтрации и группировки тестового набора сделок должны совпадать.

### БЛ5. Получение актуальной версии сделки на дату
***Затронутые задачи: #117, #80, #Ф5, #Ф6, #77, #95***

_Контекст._ Изложен выше в пререквизитах.

_Решение._ Требуется возможность осуществить запрос к данным транзакционного ядра, отбирающий ФО и БО параметры (с указанием этой разметки) таких сделок, актуальных на заданную дату.

_Алгоритм проверки._ Осуществляется запрос к данным транзакционного ядра, отбирающий сделки по выбранному признаку(ам). Затем производится фильтрация и группировка вышеупомянутого набора тестовых сделок (например, в Excel) соответствующим образом. Результат выполнения запроса к данным ядра и результат фильтрации и группировки тестового набора сделок должны совпадать.

### БЛ6. Выгрузка сделок по признакам санкционности
***Затронутые задачи: #117, #116, #77, #95***

_Контекст._ Изложен выше в пререквизитах + контрагенты и инструменты, вносимые в Ядро, должны обладать признаком санкционности.

_Решение._ Требуется возможность осуществить запрос к данным транзакционного ядра, отбирающий ФО и БО параметры (с указанием этой разметки) таких сделок, в которых контрагент и/или инструмент имеет признак санкционности.

_Алгоритм проверки._ Осуществляется запрос к данным транзакционного ядра, отбирающий сделки по выбранному признаку(ам). Затем производится фильтрация и группировка вышеупомянутого набора тестовых сделок (например, в Excel) соответствующим образом. Результат выполнения запроса к данным ядра и результат фильтрации и группировки тестового набора сделок должны совпадать.

________________________________________

## ReferenceData & BPM (__РД__)
### РД1. Хранение данных Справочника Контрагентов в транзакционном ядре
***Затронутые задачи: #117, #Ф11, #Ф5, #Ф6***

_Контекст задачи._ В будущем для всех инвестиционных бизнесов группы и информационных систем, которые они используют, планируется использовать единый справочник контрагентов и их производных сущностей (счета, платежные инструкции, доверенности, контакты) для того, чтобы:

1. У каждого контрагента был единый уникальный идентификационный номер;
2. Данные по контрагентам были целостными и едиными;
3. Все системы обращались к единому сервису контрагентов;

Количество контрагентов всех инвестиционных бизнесов составляет более 20 млн. объектов, таким образом, основное требования к базе данных в контексте хранения данных справочника контрагентов - возможность хранения и обработки большого количества данных.

_Решение задачи._ Предлагается использовать в качестве базы данных для справочника Транзакционное ядро. То есть вместо реляционной базы данных, которая используется сейчас, использовать решение на основе Tarantool. При этом на стороне транзакционного ядра необходимы сервисы для создания и обновления объектов справочника и сервисы для передачи информации системам-потребителям.

_Алгоритм проверки._ В транзакционном ядре при помощи сервисов можно создавать либо обновлять объекты Справочника Контрагентов, а далее выгрузить их оттуда без потери информации.

### РД2. Изменение объектной модели Контрагента и журнал аудита
***Затронутые задачи: #Ф11***

_Контекст задачи._ В будущем для всех инвестиционных бизнесов группы и информационных систем, которые они используют, планируется использовать единый справочник контрагентов и их производных сущностей (счета, платежные инструкции, доверенности, контакты) для того, чтобы:

1. У каждого контрагента был единый уникальный идентификационный номер;
2. Данные по контрагентам были целостными и едиными;
3. Все системы обращались к единому сервису контрагентов;

Так же необходимо отметить, что объекты справочника должны иметь гибкую структуру, то есть количество атрибутов у сущностей может увеличивать бизнес-пользователь самостоятельно (требование конфигурируемости).

_Решение задачи._ Предлагается использовать в качестве базы данных для справочника Транзакционное ядро. В рамках требования конфигурируемости требуется, чтобы Транзакционное ядро предоставляло сервисы, позволяющие изменять структуру объектов справочника. Также транзакционное ядро должно хранить аудиторскую информацию об объектах (время создания, время изменения, время верификации объектов, ИД пользователей, производящих изменения над объектами и т.д.).

_Алгоритм проверки._ С помощью сервиса транзакционного ядра можно получить аудиторскую информацию об объектах. Есть возможность легко изменить структуру объектов справочника.

### РД3. Хранение данных Справочника Соглашений и документов в транзакционном ядре
***Затронутые задачи: #117, #Ф11, #Ф5, #Ф6***

_Контекст задачи._ В будущем для всех инвестиционных бизнесов группы и информационных систем, которые они используют, планируется использовать единый справочник соглашений для того, чтобы:
1. У каждого соглашения был единый уникальный идентификационный номер;
2. Данные по соглашениям были целостными и едиными;
3. Все системы обращались к единому сервису соглашений;

Количество соглашений всех инвестиционных бизнесов составляет более 20 млн. объектов, таким образом, основное требования к базе данных в контексте хранения данных справочника соглашений - возможность хранения и обработки большого количества данных.

_Решение задачи._ Предлагается использовать в качестве базы данных для справочника Транзакционное ядро. То есть вместо реляционной базы данных, которая используется сейчас, использовать решение на основе Tarantool. При этом на стороне транзакционного ядра необходимы сервисы для создания и обновления объектов справочника и сервисы для передачи информации системам-потребителям.

_Алгоритм проверки._ В транзакционном ядре при помощи сервисов можно создавать либо обновлять объекты Справочника Соглашений, а далее выгрузить их оттуда без потери информации.

### РД4. Изменение объектной модели Соглашения и журнал аудита
***Затронутые задачи: #Ф11***

_Контекст задачи._ В будущем для всех инвестиционных бизнесов группы и информационных систем, которые они используют, планируется использовать единый справочник соглашений для того, чтобы:

1. У каждого соглашения был единый уникальный идентификационный номер;
2. Данные по соглашениям были целостными и едиными;
3. Все системы обращались к единому сервису соглашений;

Так же необходимо отметить, что объекты справочника должны иметь гибкую структуру, то есть количество атрибутов у сущностей может увеличивать бизнес-пользователь самостоятельно (требование конфигурируемости).

_Решение задачи._ Предлагается использовать в качестве базы данных для справочника Транзакционное ядро. В рамках требования конфигурируемости требуется, чтобы Транзакционное ядро предоставляло сервисы, позволяющие изменять структуру объектов справочника. Также транзакционное ядро должно хранить аудиторскую информацию об объектах (время создания, время изменения, время верификации объектов, ИД пользователей, производящих изменения над объектами и т.д.).

_Алгоритм проверки._ С помощью сервиса транзакционного ядра можно получить аудиторскую информацию об объектах. Есть возможность легко изменить структуру объектов справочника.
________________________________________

## Методологи бэк-офиса (__БО__)
### БО1. Отчетность перед регулятором о брокерской деятельности (577-П)
***Затронутые задачи: #117, #Ф6***

_Контекст._ Регулятор, руководствуясь своим положением 577-П, направляет в Банк требование о предоставлении сведений по внутреннему учету (пример). Состав полей и требования понятны и следуют из текста запроса. В настоящее время данные можно получить из системы Альфа-Директ. Часть данных готовится автоматически, часть данных требует привлечения IT-специалистов.

_Решение._ В настоящее время данная задача решается частично в ручном, частично в автоматическом режиме. Пример ответа на запрос. Предлагаемое решение заключается в создании специального интерфейса, который будет обращаться к данным Ядра и формировать отчет, который на 100% соответствует требованиям регулятора. Тем самым функция формирования отчетов по внутреннему учету будет централизована, и вынесена из систем IB. Предполагается, что данный интерфейс будет реализован на основе виджета системы IB-Dashboard с возможностью выгрузки данных в Excel.

_Алгоритм проверки._ Решение проверяется вручную путем сравнения сгенерированного Ядром отчета с полученным от ЦБ запросом на соответствие формату (условиям и требованиям), данные - выборочно с программами-источниками IB.

### БО2. Отчетность перед регулятором о дилерской деятельности
***Затронутые задачи: #117, #Ф6***

_Контекст._ Регулятор направляет в Банк требование о предоставлении сведений по учету (в т.ч. в рамках проверок): информацию о сделках (за период и на дату), информация о ценных бумагах (остатках и оборотах), о денежных средствах (остатках и оборотах по сделкам), (по с различными группировками, включая данные бухгалтерского учета. Состав полей и требования следуют из конкретного запроса (пример). В настоящее время данные можно получить из системы Focus, Smart, Opics и хранилища бухгалтерской информации ODS. Таким образом, нет единого места, откуда можно было бы получить все требуемые данные и сформировать отчет, вместо этого функция подготовки отчета "размазана" по нескольким системам.

_Решение._ В настоящее время данная задача решается частично в ручном, частично в автоматическом режиме (в разных системах). Пример ответа на запрос. Предлагаемое решение заключается в создании специального интерфейса, который будет обращаться к данным Ядра и формировать отчет, который на 100% соответствует требованиям регулятора. Тем самым функция формирования отчетов будет централизована. Предполагается, что данный интерфейс будет реализован на основе виджета системы IB-Dashboard с возможностью выгрузки данных в Excel.

_Алгоритм проверки._ Решение проверяется вручную путем сравнения сгенерированного Ядром отчета с полученным от ЦБ запросом на соответствие формату (условиям и требованиям), данные - выборочно с программами-источниками IB

### БО3. Аудиторские запросы
***Затронутые задачи: #117, #Ф6***

_Контекст._ Ежегодно в начале календарного года в банк поступает значительное количество аудиторских запросов от аудиторских компаний. (пример) На эти запросы необходимо предоставлять ответ в сжатые сроки (обычно 3 дня). Всю информацию для ответов на данные запросы можно получить из следующих систем: Equation, Deponet, Smart, OpicsLite, Альфа-Админ или хранилища бухгалтерской информации ODS. Таким образом, нет единого места, откуда можно было бы получить всю информацию для ответа на запрос, поэтому приходится выгружать данные из разных систем банка.

_Решение._ В настоящее время запущен процесс реализации проекта по роботизации данных запросов. Это решение заключается в создании отчета роботом, который будет выгружать всю необходимую информацию из разных систем и объединять все в один файл для отправки ответа на запрос. Однако, данное решение реализуется на данном этапе вне Транзакционного ядра, а использование Транзакционного ядра как глобального хранилища данных позволит значительно сократить время получения отчета. Предполагается, что данные, необходимые для формирования отчета будут предоставляться посредством виджета системы IB-Dashboard с возможностью выгрузки данных в Excel.

_Алгоритм проверки._ Анализ и проверку предоставленных данных от робота для подготовки ответа на запрос будет осуществлять сотрудник ОКДиКП вручную с программами-источниками.
________________________________________

### IB-Reporting (__РЕ__)
### РЕ1. НРД
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо формировать отчетность в НРД по таким бизнес-сущностям как генеральные соглашения, сделки, СSA, ТСС, маржа. Каждая бизнес-сущность имеет множество анкет, определяющих состояние самой сущности. Состав полей отчетов определен требованиями спецификации НРД (см. Приложение 1.1).

_Решение._ В настоящее время данные для отчетов собираются в нескольких системах (OPICS, SMART, FOCUS, АльфаДирект), а также из скан-копий документов, передаются в ПО МИР, где также насыщаются данными и/или редактируются частично либо полностью вручную. В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по ценным бумагам, данные по клиентам/контрагентам, данные по договорам, забираются из ядра, формируются в файл-отчет и отправляются в НРД. Полученные ответы транслируются в ядро, в т.ч. параметры сущности, полученные от НРД (например: UTI, предварительные репкоды, репкоды и пр.). В зависимости от полученных ответов от НРД формируются те или иные анкеты в соответствие с бизнес-логикой. Например, бизнес-процесс по ГС (см. Приложение 1.2).  Текущий статус конкретной сущности определяется последовательностью переданных анкет и полученных ответных статусов. Текущий статус сущности определяется после получения ответа и записывается в ядро. Планируется, что ядро сможет реализовать необходимый функционал (см. Приложение 1.3).

_Алгоритм проверки._ Решение проверяется путем возможности формирования файла-отчета и получения/неполучения обратного статуса-ответа от НРД, а также анкет контрагентов, в т.ч. формирование анкет на основе полученных ответов/анкет в соответствие с бизнес-процессами.
Примечание. На текущий момент Приложение 1.1 называется Приложение 1.1_v1 и включает в себя только спецификации по сделкам типа: spot, forward, repo. В ближайшее время будут доработаны все спецификации и высланы дополнительно.

### РЕ2. ММВБ
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо отчитывать внебиржевые сделки первого и второго котировальных уровней на ММВБ в течение 15 минут с момента их заключения. Состав полей отчетов определен требованиями биржи (см. Приложение 2.1).

_Решение._ В настоящее время данные для отчетов собираются в нескольких системах (АльфаДирект, FOCUS) и передаются в IB-Reporting. Сделки формируются в отчеты и отправляются на биржу. В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по ценным бумагам, данные по клиентам/контрагентам, забираются из ядра, анализируются и формируются в файл-отчет и отправляются на биржу. Обратные статусы транслируются в ядро.

_Алгоритм проверки._ Решение проверяется путем возможности формирования файла-отчета и получения/неполучения обратного статуса-ответа от биржи.

### РЕ3. ЦБ, репортинг
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо отчитывать информацию по операциям с финансовыми инструментами, информацию по ценным бумагам, по клиентам в различных разрезах в соответствие c требованиями ЦБ.

Приложение 3.3

|Форма|Содержание|Периодичность|Комментарий|
| --------|---------|-------|---------|
|402|Расчеты между резидентами и нерезидентами за выполнение работ и оказание услуг|Ежемесячная|Приложение 3.1|
|404|Отчет о ценных бумагах, выпущенных нерезидентами|Ежеквартальная|Приложение 3.1|
|405|Операции с ценными бумагами между резидентами и нерезидентами|Ежемесячная|Приложение 3.1|
|702|Отчет о неисполненных сделках|Дважды в месяц|Приложение 3.1|
|706|Отчет о внебиржевых операциях|Ежемесячная|Приложение 3.1|
|707|Отчет о клиентах по брокерской и депозитарной деятельности|Ежемесячная|Приложение 3.1|
|711|Отчет о ценных бумагах|Ежемесячная|Приложение 3.1|

Состав полей отчетов определен требованиями ЦБ (см. Приложения 3.1-3.7).

_Решение._ В настоящее время данные для отчетов собираются в нескольких системах (АльфаДирект, SMART, DEPONET, LOANMANAGER, EQUATION), а также в иных источниках (например, из витрин данных), затем вручную/автоматизированно обрабатываются и формируются в отчеты. Данные, сформированные в отчет, отправляются в УБО (управление банковской отчетности) в формате Kliko. В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по ценным бумагам, данные по клиентам/контрагентам, забираются из ядра, анализируются и формируются в файл-отчет в формате Kliko и отправляются в УБО.

_Алгоритм проверки._ Решение проверяется путем возможности формирования корректного файла-отчета, успешной валидации данных в ПО Kliko и успешного проведения межформенных сверок.

### РЕ4. ЦБ, уведомления
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо формировать уведомления (по шаблону) при наступлении того или иного события в соответствие со следующей таблицей:

|Событие|Комментарий|
|---|---|
|О приобретении свыше 1% акций долей (кредитной организации)|Приложение 3.8|
|Раскрытие информации в форме сообщения о существенном факте, в случае приобретения свыше 5%, 10%, 15% голосующих акций отдельной организации|Приложение 3.9|
|Уведомление о приобретении и отчуждении ценных бумаг СXО (специализированное хозяйственное общество)|Приложение 3.10|
|Уведомление о заключении сделок на сумму свыше 7 млрд рублей|Приложение 3.11|

Состав полей уведомлений и шаблоны определен требованиями ЦБ (см. Приложения 3.8-3.11).

_Решение._ В настоящее время факт наступления события отслеживается вручную путем ежедневного формирования отчетов из системы SMART. При выявлении события вручную формируются соответствующие уведомления. Далее уведомление отправляется в соответствующее подразделение банка (для согласования, для отправки в ЦБ, для опубликования на сайте и т.п.). В целевом решении в автоматизированном/автоматическом режиме происходит уведомление пользователя о наступлении того или иного события, все необходимые данные выгружаются из ядра и формируются в файл-уведомление, готовый к отправке в соответствующее подразделение.

_Алгоритм проверки._ Решение проверяется путем возможности своевременного формирования корректного файла-уведомления по тому или иному событию.

### РЕ5. EMIR, репортинг
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо формировать отчетность по биржевым и внебиржевым сделкам с деривативами в Европейский репозитарий (CME) по таким бизнес-сущностям как сделка (заключение, подтверждение, изменение условий [договоренность сторон], корректировка [правка неверных данных в системах], амортизация, расчеты, расторжение, новация), МТМ (ежедневная рыночная оценка открытой позиции) и маржа (ежедневные остатки сумм с указанием направления и суммы превышения). Каждая бизнес-сущность имеет единственную анкету с разными типами событий, определяющих состояние самой сущности. Срок отчетности T+1. Состав полей отчетов зависит от asset-классов (тип актива) и описан в спецификации CME (см. Приложение 4.1).

_Решение._ В настоящее время данные для отчетов собираются в нескольких системах (OPICS [+MetaTrader], SMART, FOCUS, АльфаДирект), отчеты формируются и направляются в личный web-кабинет репозитария вручную.  В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по деривативам, данные по клиентам/контрагентам, данные по договорам, забираются из ядра, формируются в файл-отчет и отправляются в репозитарий. Полученные ответы транслируются в ядро, в т.ч. статус загрузки/мэтчинга и описание ошибки/расхождения в случае наличия.

_Алгоритм проверки._ Решение проверяется путем возможности формирования корректного файла-отчета и получения ответа от CME об успешной загрузке.

### РЕ6. EMIR, реконсиляция
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо проводить регулярную сверку открытых позиций (основные парматеры и МТМ) с контрагентами. Частота и способ определяются классификацией контрагента (юрисдикция, EMIR-статусы), договоренностями с ним и объемом открытых позиций. Сверка возможна через третьих лиц (например, платформа TriResolve) или непосредственно с самим контрагентом по электронной почте.

1.	По электронной почте направляется отчет об открытой позиции отдельно каждому контрагенту, который является принимающей стороной по сверке (договоренность в рамках генсоглашения).
2.	По TriResolve сверка ежедневная T+1. Отчеты формируются по каждому контрагенту. Состав полей отчетов-сверок в TriResolve рекомендуется спецификацией (см. Приложение 4.2).

_Решение._ В настоящее время данные для отчетов собираются в нескольких системах (OPICS [+MetaTrader], SMART), отчеты формируются и направляются в личный web-кабинет TriResolve вручную. В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по деривативам, данные по клиентам/контрагентам забираются из ядра, формируются в файл-отчет и отправляются в TriResolve.

_Алгоритм проверки._ Решение проверяется путем возможности формирования корректного файла-отчета для успешной загрузки в TriResolve или отправки по электронной почте контрагенту.

### РЕ7. MiFID, CySec
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо отчитывать все биржевые и внебиржевые сделки со следующими инструментами: финансовые инструменты, допущенные к торгам на европейских площадках; финансовые инструменты, базовый актив которых допущен к торгам на европейских площадках; сделки с корзиной или индексами, состав которых входит хотя бы одним инструментом, допущенным к торгам на европейских площадках. Финансовые инструменты, допущенные к торгам на европейских площадках, содержатся в справочнике FIRDS, обновляемом ежедневно. Отчитываются события заключения, изменения, расторжения. Срок отчетности T+1. Состав полей отчетов определен спецификацией MiFIR (см. Приложение 5.1).

_Решение._ В настоящее время источником данных для отчета является система FOCUS, отчет формируется на платформе IB-Reporting. При попадании в IB-Reporting сделки анализируются, на следующий день последние версии верифицированных сделок отбираются в отчет и отправляются в СySec. В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по финансовым инструментам, допущенным к торгам на европейских площадках, забираются из ядра, анализируются, и на следующий день последние версии верифицированных сделок отбираются в отчет и отправляются в СySec.

_Алгоритм проверки._ Решение проверяется путем возможности формирования корректного файла-отчета и получения успешного обратного статуса-ответа по каждой сделке от CySec.

### РЕ8. MiFID, Post-Trade Transparency Publication
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ В соответствие с требованиями регулятора, необходимо опубликовать информацию по заключениям, изменениям и расторжениям сделок с финансовыми инструментами, торгуемыми на европейских торговых площадках. Информация направляется в Bloomberg-APA в течение 3 минут с момента свершения одного из вышеперечисленных событий (с 2019 года регламент ограничен 1 минутой). Для отбора сделок необходимо наличие информации о месте и способе заключения сделки, наличия инструмента в FIRDS, параметры контрагента, в т.ч. юрисдикция, инвесткомпания в рамках MiFID, статус SI, и направление сделки. Состав полей отчетов определен спецификацией MiFIR (см. Приложение 5.2).

_Решение._ В настоящее время источником данных для отчета является система FOCUS, отчет формируется на платформе IB-Reporting автоматически. При попадании в IB-Reporting сделки анализируются, отбираются в отчет и отправляются в Bloomberg-APA. В целевом решении все данные, необходимые для отчета, в т.ч. справочные данные по финансовым инструментам, контрагентам и параметрам заключения сделки, забираются из ядра, отбираются в отчет и отправляются в Bloomberg-APA в регламентированный срок.

_Алгоритм проверки._ Решение проверяется путем возможности корректного отбора сделок и своевременного направления информации в Bloomberg-APA, а также получения успешного обратного статуса-ответа по каждой сделке от принимающей системы.
________________________________________

## Управление операций на валютном рынке (__УОВР__)
### УОВР1. Генерация ежемесячного отчета для дилеров (Sales Report)
***Затронутые задачи: #117, #116, #80, #Ф8***

_Контекст._ Существует процесс, в рамках которого требуется регулярная (ежемесячная, двухнедельная, недельная) отчетность по сделкам, которая используется для оперативного реагирования на изменение структуры рыночных оборотов (Пример).

_Решение._ В настоящий момент времени этот отчет создается при помощи самодельного решения на базе MS Access. Экспертизой в части работы данного программного модуля обладает только один сотрудник, и когда он оказывается недоступен, формирование такой отчетности приводит к значительным затратам труда и времени. Кроме того, существующее решение не обладает достаточной гибкостью для формирования отчетов в другой форме. Требуемое решение представляет собой витрину, которая обращается к данным Транзакционного ядра. Такая витрина должна быть настраиваемой (возможность настройки способов выборки и агрегации данных) и должна выдавать данные по запросу.

_Алгоритм проверки._ Для того, чтобы удостовериться в корректности отчета, выдаваемого витриной Ядра, следует сравнить его с отчетом, выдаваемом существующим Access-приложением.

### УОВР2. Генерация отчета системой OPICS-Lite
***Затронутые задачи: #117, #116, #80, #Ф5, #Ф6, #Ф8***

_Контекст._ Существует система OpicsLite, предназначенная для создания разнообразных отчетов на основе данных системы OPICS (подробности см. в документации OpicsLite). Необходимость в наличии системы OpicsLite обусловлена тем, что для генерации отчетов непосредственно в системе OPICS требуются дорогостоящие лицензии для сотрудников.

_Решение._ В настоящий момент времени эти отчеты создаются в системе OpicsLite. В целях централизации функции отчетности, а также с целью вывода системы OpicsLite, требуется создание этих же отчетов на базе витрины данных Транзационного ядра.

_Алгоритм проверки._ Для того, чтобы удостовериться в корректности отчета, выдаваемого витриной Ядра, следует сравнить его с отчетом, выдаваемом существующим приложением OPICS-Lite.

### УОВР3. Запись «сырых» котировок из Котировального модуля
***Затронутые задачи: #77, #95, #116***

_Контекст._ Планируется использование Транзакционного ядра как платформы хранения сырых котировок, поступающих от источников ликвидности, для дальнейшей трансляции системам онлайн-котирования.

_Решение._ Требуется возможность автоматической передачи сырых котировок (без применения настроек по спреду) во входной контур Транзакционного ядра. Для этого необходимо наличие:
*	Наличие у ТЯ входного адаптера, принимающего сырые котировки из Котировального модуля Alfa FX;
*	Наличие в модели данных ТЯ объекта «Котировка»;
После записи котировки в ТЯ они должны транслироваться через витрины, к которым планируется подключать системы онлайн-котирования (в частности, АЛБО).

_Алгоритм проверки._ Проверка данного функционала ТЯ производится по следующему алгоритму:
1.	Потоковый котировальный модуль Alfa FX, получающий котировку от источников ликвидности, отправляет её во входной контур транзакционного ядра (T-Connect)
2.	Сотрудник, имеющий доступ и к котировальному модулю Alfa FX, и к витринам ТЯ, проверяет факт передачи этой котировки из потокового котировального модуля Alfa FX и факт наличия этой котировки в витрине ТЯ.

### УОВР4. Трансляция изменений НСИ в Котировальный модуль
***Затронутые задачи: #Ф11, #116***

_Контекст._ Планируется использование Транзакционного ядра как платформы хранения нормативно-справочной информации (НСИ), используемой для обработки сырых котировок. НСИ включают в себя следующую информацию:
*	Справочник общих настроек котирования
*	Справочник валют
*	Справочник групп финансовых инструментов
*	Справочник валютных пар
*	Справочник групп CutOfTime
*	Справочник периодов CutOfTime по группам CutOfTime и валютам
*	Справочник источников котировок
*	Справочник правил формирования синтетических котировок
*	Справочник форвардных пунктов
*	Справочник групп по спреду
*	Справочник параметров котирования для группы по спреду
*	Справочник праздников по валютам
*	Справочник клиентов

Изменения этой справочной информации ведутся через пользовательский интерфейс в системе IB-Dealing, и должны передаваться в транзакционное ядро. Далее ТЯ должно транслировать все изменения НСИ потоковому котировальному модулю Alfa FX посредством сервиса подписки.

_Решение._ Транзакционное ядро должно удовлетворять следующим требованиям:
*	Модель данных ТЯ включает вышеперечисленные справочники
*	ТЯ интегрировано с IB-Dealing, чтобы принимать изменения НСИ в автоматическом режиме
*	ТЯ транслирует изменения НСИ через соответствующий сервис подписки в потоковый котировальный модуль Alfa FX.

_Алгоритм проверки._ Проверка данного функционала ТЯ производится по следующему алгоритму:
1.	Сотрудник, имеющий доступ к системе IB-Dealing, осуществляет в ней какое-либо изменение НСИ.
2.	Сотрудник, имеющий доступ к потоковому котировальному модулю Alfa FX, отслеживает данное изменение НСИ.

________________________________________

## Управление структурных продуктов (__УСП__)
### УСП1. Автоматизация заведения сделок в FOCUS (бивалютный депозит)
***Затронутые задачи: #116***

_Контекст._ В системе OPICS сотрудники УСП заводят сделку по открытию бивалютного депозита. Для целей учёта показателей Profit/Loss и Cash Flow данную сделку необходимо так же вести в системе FOCUS. Однако, в системе FOCUS отсутствует модель сделки «Бивалютный депозит», в связи с чем приходится заводить эту сделку в виде эквивалента четырёх сделок, а именно: депозит, опцион, депозит с казначейством и опцион с акзначейством. При создании этих четырёх сделок не добавляются новые параметры, а происходит лишь перераспределение тех, что уже существуют в исходной сделке. Эта процедура производится в ручном режиме, что связано с трудозатратами и возможностью операционных ошибок. При этом от сотрудника не требуется принятия бизнес-решений, процедура создания экономического эквивалента может быть полностью описана алгоритмически, а значит и автоматизирована. Важной предпосылкой к автоматизации процесса является адаптер на стороне системы FOCUS, принимающий XML-сообщения, и записывающий сделки в БД Focus.

_Решение._ Текущее решение – ручное заведение четырех сделок в системе FOCUS сотрудником УСП.

Предлагаемое решение:
*	Вариант А. Применение роботов (RPA) для автоматизации заведения сделок в FOCUS. Данный вариант является наиболее приоритетным, т.к. характеризуется наименьшими time-to-market и стоимостью. Если по каким-либо причинам данное решение будет отклонено, предлагается использовать вариант B.
*	Вариант B. Доработка интеграции между системами OPICS и FOCUS для автоматической передачи сделок. Данный вариант характеризуется более высокими сроками реализации и стоимостью по сравнению с вариантом A. Если по каким-либо причинам невозможно применение решений A и B, предагается использовать вариант C.
*	Вариант C (__нежелательно__). Планируется, что сделки из системы OPICS будут передаваться в Транзакционное ядро в реальном времени. В таком случае, вариант C заключается в следующем: Транзакционное ядро в автоматическом режиме обрабатывает сделку "Бивалютный депозит", приходящую из OPICS, и в автоматическом режиме передает в FOCUS все необходимые эквиваленты. Для корректного приема эквивалентов на стороне FOCUS также требуется доработка.

_Алгоритм проверки._ Сотрудник УСП заводит сделку "Бивалютный депозит" в системе OPICS, после чего проверяет, присутствует ли эта сделка (в едином виде либо в виде экономических эквивалентов) в системе FOCUS.

### УСП2. Автоматизация заведения сделок в FOCUS (структурные бонды)
***Затронутые задачи: #116***

_Контекст._ Система Modullar получает сделки по структурным бондам с биржи (ММВБ), и выгружает их в FOCUS для целей учёта показателей Profit/Loss и Cash Flow. Однако, в системе FOCUS для этих целей приходится дополнительно заводить четыре технических сделки: фондирование в казне, технический депозит, технический опцион и сделка, противоположная биржевой. При создании этих сделок добавляется 3 параметра: ставки СФЦ, МСФО и стоимость опциона. Эта процедура производится в ручном режиме, что связано с трудозатратами и возможностью операционных ошибок. При этом от сотрудника не требуется принятия бизнес-решений, процедура создания эквивалента может быть полностью описана алгоритмически, а значит и автоматизирована. Важной предпосылкой к автоматизации процесса является адаптер на стороне системы FOCUS, принимающий XML-сообщения, и записывающий сделки в БД Focus.

_Решение._ Текущее решение – ручное заведение сделок в системе FOCUS сотрудником УСП.

Предлагаемое решение:
*	Вариант А. Применение роботов (RPA) для автоматизации заведения сделок в FOCUS. Данный вариант является наиболее приоритетным, т.к. характеризуется наименьшими time-to-market и стоимостью. Если по каким-либо причинам данное решение будет отклонено, предлагается использовать вариант B.
*	Вариант B. Доработка интеграции между системами Modullar и FOCUS для автоматической передачи сделок. Данный вариант характеризуется более высокими сроками реализации и стоимость. по сравнению с вариантом A. Если по каким-либо причинам невозможно применение решений A и B, предагается использовать вариант C.
*	Вариант C (нежелательно). Планируется, что сделки из системы Modullar будут передаваться в Транзакционное ядро в реальном времени. В таком случае, вариант C заключается в следующем: Транзакционное ядро в автоматическом режиме обрабатывает сделку "Структурный бонд", приходящую из Modullar, и в автоматическом режиме передает в FOCUS все необходимые эквиваленты. Для корректного приема эквивалентов на стороне FOCUS также требуется доработка.

_Алгоритм проверки._ Сотрудник УСП заводит сделку "Структурный бонд" на площадке ММВБ, после чего проверяет, присутствует ли эта сделка (в едином виде либо в виде экономических эквивалентов) в системе FOCUS.

### УСП3. Трансляция витрин Транзакционного ядра в Dashboard
***Затронутые задачи: #116***

_Контекст._ В рамках процессов УСП часто возникает потребность в работе с данными по сделкам, находящимися в разных системах (OPICS, FOCUS). Решаемые задачи зачастую являются единичными, и их целесообразно решать при помощи MS Excel.

_Решение._ Существующее решение заключается в ручной выгрузке сделок из нужных источников в формате MS Excel. В силу различий между объектными моделями систем-источников, возникает необъодимость в ручном сведении данных (отбор общих полей и т.д.), что выливается в трудозатраты. Предлагаемое решение: виджет на стороне системы IB-DashBoard предоставляет доступ к данным Транзакционного ядра, где уже хранятся сделки из разных систем-источников. Виджет предполагает возможность выгрузки информации в формате MS Excel.

_Алгоритм проверки._ Сравнивается результат ручных выгрузок с данными, отображаемыми в IB-Dashboard.
________________________________________

## Поддержка IB (__П__)
### П1. Сценарии Switchover и Failover
***Затронутые задачи: #109***

_Контекст._ Транзакционное ядро относится к системе класса mission critical, что означает определенные требования по её отказоустойчивости.

_Решение._ Требуется возможность осуществления следующих сценариев:
1.	Switchover. В случае, когда планируются работы на одном из центров обработки данных, должен производиться сценарий switchover. Все ноды на одном сервере контролируемо останавливаются с переводом всей нагрузки на резервный сервер. Операция должна происходить без недоступности всей системы. Recovery time objective cоставляет 30 мин.
2.	Failover. В случае, когда происходит:
  * незапланированное выключение сервера,
  * сетевая недоступность площадки,

  должен производиться сценарий failover. Все ноды на одном сервере останавливаются с переводом всей нагрузки на резервный сервер. Операция должна происходить без недоступности всей системы. Recovery time objective cоставляет 4 часа.
3.	Восстановление схемы. После осуществления сценариев Switchover либо Failover должен происходить переход на обычную схему работы в автоматическом режиме. При этом осуществляется ввод в работу ранее отключенных компонентов системы. Recovery time objective cоставляет 30 мин.

Регламенты см. в документации «ИТ-стандарт ОАО «Альфа Банк». Классы ИТ- систем и типовые архитектуры»

_Алгоритм проверки._ Сценарии воспроизводятся сотрудниками поддержки.

### П2. GUI администратора
***Затронутые задачи: #109***

_Контекст._ Для управления работой Транзакционного ядра и оперативного решения возникающих проблем специалистам сопровождения требуется интерфейс администратора.

_Решение._ Интерфейс администратора должен обладать графическим оформлением (наподобие платформы Modullar Console Systematica) и обеспечивать возможность выполнения следующих функций:
1.	Мониторинг компонентов системы;
  *	Отображение компонентов системы в логической иерархии в виде дерева, например: Главный узел (резервный узел), Основной интеграционный узел (резервный узел);
  * Графическое отображение схемы репликации объектов (отношения, физическое местоположение шарда, текущее состояние репликации)
  * Требуется отображение состояния docker-контейнера (+ автоматическая рассылка ответственным в случае падения docker-контейнера) с сортировкой по функциональной схеме;
  * Требуется возможность «быстрого» добавления новых метрик мониторинга (механизм добавления новых метрик не обязательно делать непосредственно в GUI администратора);
  * Требуется возможность «быстрого» конфигурирования метрик мониторинга (механизм конфигурирования новых метрик не обязательно делать непосредственно в GUI администратора);
  * Требуется возможность «быстрого» конфигурирования уведомлений на базе данных метрик;
2.	Мониторинг нагрузки;
  * Мониторинг физической инфраструктуры (хостов): графики загруженности CPU, RAM, I/OPs, сетевая активность
  * Мониторинг виртуальной инфраструктуры (контейнеров): графики загруженности CPU, RAM, сетевая активность, соотношение с допустимыми параметрами
3.	Рассылка ответственным. Требуется наличие механизма оповещения ответственных лиц при наступлении аварийных событий каким-либо из следующих способов: почтовая рассылка, смс-рассылка, сообщение через мессенджер.
4.	Управление приложениями
  * Должен быть предусмотрен механизм отображения, конфигурирования, создания и удаления компонентов каждого запущенного компонента ТЯ
5.	Управление маршрутами T-Connect’а и подписками Ядра;
  * Требуется графическое отображение состояния соединений интеграционной шины T-Connect с её источниками и потребителями (+ автоматическая рассылка ответственным в случае недоступности соединения);
  * Возможность управления очередями интеграционной шины T-Connect;
  * Возможность просмотра сообщений шины с фильтрацией по дате, системе получателю, системе источнику, статусу, идентификаторам сообщения
6.	Доступ к ремонтной очереди. Объекты, передаваемые в Транзакционное ядро, поступают в ремонтную очередь в случае невозможности определения модели этого объекта, либо в том случае, когда объект не укладывается в модель, либо когда объект нарушает консистентность данных. Требуются следующие инструменты работы с ремонтной очередью:
  * Автоматическое оповещение ответственных в случае попадания объекта в ремонтную очередь;
  * Ручное отнесение объекта к тому или иному типу;
  * Автоматический обработчик ремонтной очереди, срабатывающий при обновлении объектной модели либо по команде администратора;
  * Графическое отображение объектной модели;
7.	Контроль за EOD-процедурами. Требуется таблица, отображающая статус выполнения каждого шага каждой EOD-процедуры. В случае неуспешного выполнения EOD-процедуры должно происходить автоматическое оповещение ответственных, а также требуется возможность ручного перезапуска EOD-процедуры. Частный пример EOD-процедуры – сверка.
8.	Выборка данных.
  * Должен быть предусмотрен интерфейс для выполнения запросов к БД ТЯ для первичного анализа проблем и разбора бизнес-кейсов;
  * Необходимо предусмотреть экспорт полученной информации в xlsx и другие доступные форматы;
9.	Логи системы.
  * Должен быть предусмотрен единый интерфейс для доступа к логам всех компонентов системы;
  * В интерфейсе должны быть реализованы фильтры:
        * По дате
        * По уровню сообщения
        * По компоненту-владельцу лога
        * По предопределенным регулярным выражениям и полнотекстовый поиск
  * Должна быть предусмотрена возможность визуализаций на базе информации из логов: встроенная, либо с использованием имеющихся Open Source решений
  * Должна быть предусмотрена возможность экспорта информации в текстовый файл
10.	Управление доступом к данным Ядра
  * Для управления ролевым доступом к данным Транзакционного ядра (по запросу) должен быть предусмотрен интерфейс для настройки ролей и управления правами пользователей

_Алгоритм проверки._ Полнота функционального наполнения определяется специалистом поддержки.

### П3. Архивация и резерв
***Затронутые задачи: #109, #Ф6***

_Контекст._ В целях экономии пространства Транзакционного ядра осуществляется архивация данных, а в целях защиты – резервное копирование.

_Решение._ Требуется обеспечить регулярное автоматическое копирование данных Транзакционного ядра. Для осуществления архивации требуется автоматический анализ того, подлежит ли объект архивации, а также механизм конфигурирования этого анализа.
________________________________________

## Аналитический портал IB
### АПО1. Сбор информации о действиях посетителей Аналитического портала IB
***Затронутые задачи: #Ф11, #116***

_Контекст._ Разрабатываемый Аналитический портал Инвестиционного банка призван стать одним из главных источников финансовой аналитики для игроков финансового рынка. Помимо этой задачи, в целях привлечения новых клиентов Альфа-Банка и удержания старых, планируется предоставление персонализированных предложений и аналитик посетителям Аналитического портала. Такие предложения должны формироваться на основе (а) поведенческих паттернов посетителя и (б) истории взаимодействия данного посетителя с Альфа-Банком, в том случае, если этот посетитель уже является клиентом АФБ.
В настоящее время разрабатывается Транзакционное ядро – централизованная платформа хранения данных по клиентам АФБ и их сделкам. Эта система, в том числе, характерна использованием технологий баз данных In-Memory, что обеспечивает возможность быстрого обращения к данным Транзакционного ядра. Эта особенность обуславливает удобство использования Транзакционного ядра как платформы накопления информации о поведении посетителя Аналитического портала.
Таким образом, Аналитический портал, с одной стороны, должен иметь возможность отгружать данные о поведении своих посетителей в Транзакционное ядро, а с другой стороны – иметь возможность оперативного получения этих данных и данных о взаимодействии посетителя с АФБ, если таковые имеются.

_Решение._ Предлагается фиксировать на стороне Аналитического портала следующую информацию о поведении посетителя:
1.	Технологические данные о визите пользователя
  *	Браузер посетителя
  *	IP-адрес посетителя
  *	Тип устройства посетителя (десктоп, планшет, смартфон)
  *	И т.д.
2.	Регистрационные данные пользователя (в случае заведения им личного кабинета на АП)
  *	ФИО
  *	Телефон
  *	E-mail
  *	Паспортные данные
  *	И т.д.
3.	Поведенческие данные о визите пользователя
  *	Является ли посетитель зарегистрированным пользователем
  *	Адреса и тематики просмотренных страниц
  *	Время, потраченное на просмотр страницы
  *	Дату и время визита на каждую из страниц
  *	Клики на промоматериалы (баннеры и ссылки) с указанием тематики промо
  *	Степень прокрутки страницы (степень полноты прочтения материала пользователем)
  *	И т.д.

Перечень фиксируемых данных может быть уточнен в процессе разработки Аналитического портала. После фиксации этой информации на стороне АП её следует отправлять во входной контур Транзакционного ядра для последующего обращения к ней. Также необходимо участие команды Аналитического портала в процессе разработки объектной модели хранимой информации.

Под эти цели в Транзакционном ядре будет выделено дисковое пространство в размере 30 Гб. Если в будущем возникнет потребность в увеличении этого объема, предлагается провести отдельное обсуждение.

_Алгоритм проверки._ Проверка корректной работы данного механизма осуществляется следующим образом:
1.	Пользователи из тестового набора, часть которых является клиентом АФБ, заходят на Аналитический портал и производят там разнообразные действия. При этом обязательно осуществляется фиксация своих действий самим тестовым пользователем. Примеры пользовательских сценариев:
  * Частичный просмотр страницы через разные браузеры без осуществления регистрации в личном кабинете;
  * Полный просмотр страницы через разные браузеры без осуществления регистрации в личном кабинете;
  * Частичный просмотр страницы через разные браузеры с осуществлением регистрации в личном кабинете;
  * Полный просмотр страницы через разные браузеры с осуществлением регистрации в личном кабинете;
  * И т.д.
2.	Производится запрос к данным Транзакционного ядра и осуществляется сравнение записанных данных с зафиксированными действиями каждого из тестовых пользователей.

### АПО2. Получение информации посетителей Аналитического портала IB
***Затронутые задачи: #Ф11, #116***

_Контекст._ Разрабатываемый Аналитический портал Инвестиционного банка призван стать одним из главных источников финансовой аналитики для игроков финансового рынка. Помимо этой задачи, в целях привлечения новых клиентов Альфа-Банка и удержания старых, планируется предоставление персонализированных предложений и аналитик посетителям Аналитического портала. Такие предложения должны формироваться на основе (а) поведенческих паттернов посетителя и (б) истории взаимодействия данного посетителя с Альфа-Банком, в том случае, если этот посетитель уже является клиентом АФБ.
В настоящее время разрабатывается Транзакционное ядро – централизованная платформа хранения данных по клиентам АФБ и их сделкам. Эта система, в том числе, характерна использованием технологий баз данных In-Memory, что обеспечивает возможность быстрого обращения к данным Транзакционного ядра. Эта особенность обуславливает удобство использования Транзакционного ядра как платформы накопления информации о поведении посетителя Аналитического портала.
Таким образом, Аналитический портал, с одной стороны, должен иметь возможность отгружать данные о поведении своих посетителей в Транзакционное ядро, а с другой стороны – иметь возможность оперативного получения этих данных и данных о взаимодействии посетителя с АФБ, если таковые имеются.

_Решение._ При обращении пользователя к Аналитическому порталу должен фиксироваться набор данных, необходимых для его идентификации: технологические данные о визите (браузер, IP-адрес) и регистрационные данные в случае зарегистрированных пользователей. Затем этот набор данных должен передаваться в Транзакционное ядро в виде запроса информации об этом пользователе. На стороне Транзакционного ядра производится попытка идентификации данного пользователя, и, в случае успешной идентификации, Транзакционное ядро должно передавать на сторону Аналитического портала агрегированную информацию об этом пользователе, включая:
1.	История поведения пользователя на портале:
  *	Перечень интересующих тем;
  *	Среднее время просмотра страниц по каждой теме;
  *	Средняя степень ознакомления с содержимым страниц по каждой теме;
  *	И т.д.
2.	История взаимодействия пользователя с АФБ (только в том случае, если пользователь идентифицирован как клиент, а также при наличии необходимых разрешений от клиента относительно обработки персональных данных):
  *	Величина портфеля;
  *	Перечень ценных бумаг, с которыми клиент имел дело;
  *	Перечень типов сделок, с которыми клиент имел дело;
  *	И т.д.

Перечень возвращаемых данных может быть уточнен в процессе разработки Аналитического портала. После передачи этой информации на стороне АП планируется осуществление её интеллектуального анализа с целью показа персонифицированных предложений и аналитик. Важным требованием является оперативная передача информации о пользователе из Транзакционного ядра на приемный контур Аналитического портала.

_Алгоритм проверки._ Проверка корректной работы данного механизма осуществляется следующим образом:
1.	Пользователи из тестового набора, часть которых является клиентом АФБ, заходят на Аналитический портал разными способами (через разные браузеры, с использованием личного кабинете или без такового);
2.	Производится проверка того, получена ли входным контуром Аналитического портала информация о пользователе;
3.	Производится анализ корректности и полноты информации, полученной от Транзакционного ядра.

________________________________________

## Риски (__Р__)
### Р1. Передача данных из ELM в Транзакционное ядро
***Затронутые задачи: #116***

_Контекст._ Система контроля лимитов ELM (Egar Limit Manager) осуществляет расчет риска, контроль соблюдения лимитов и авторизацию сделок. В результате обработки входящего объекта система ELM генерирует статусы авторизации в рамках различных лимитов. При заключении и оформлении сделки сотрудникам подразделений важно понимать следующие риск-статусы сделки из системы ELM:
*	Статус авторизации сделки;
*	Статусы удовлетворения сделки всех затронутых ею лимитов. Выделяют лимиты на:
  *	объем риска по конверсионным операциям;
  *	объем риска по сделкам REPO;
  *	объем риска по сделкам купли/продажи ценных бумаг;
  *	объем открытой позиции в ценных бумагах;
  *	консолидированные лимиты с учетом корпоративных лимитов;
  *	другие;
*	Величины утилизации затронутых лимитов;

_Решение._ В настоящее время указанные данные не передаются из ELM в другие системы, что приводит к трудозатратам в случае необходимости обращения к этой информации. Требуется обеспечить возможность хранения риск-параметров как часть объектной модели Транзакционного ядра. Планируется передавать указанные риск-параметры из ELM в Транзакционное ядро для последующего предоставления потребителям (в т. ч. во фронт-офисные системы).

_Алгоритм проверки._ Полнота и корректность предоставляемых данных проверяется с использованием автоматических средств сверки.

### Р2. Передача данных из Транзакционного ядра в ELM
***Затронутые задачи: #116***

_Контекст._ Система контроля лимитов ELM (Egar Limit Manager) осуществляет расчет риска, контроль соблюдения лимитов и авторизацию сделок. Для этих целей система ELM должна получать данные по сделкам в необходимом объеме (см. ниже), своевременно (с минимально возможной задержкой) и в автоматическом режиме.

_Решение._ Для целей системы ELM ей требуются следующие данные (на текущий момент данные предоставляются не в полном объеме):

|Объект|Система-источник|
|---|---|
|Сделки (в т.ч. маржинальные параметры)|FOCUS, OPICS|
|Обязательства|FOCUS, OPICS|
|События|FOCUS, OPICS, SMART|
|Факты расчетов|OPICS, SMART, FOCUS|
|Факты репортинга|IB-Reporting|
|Позиции и market value сделок|FOCUS (только при условии наличия «Аналитического модуля»)|

Требуется, чтобы Транзакционное ядро хранило указанные объекты из систем-источников в единой объектной модели. Система ELM должна быть интегрирована с Транзакционным ядром, чтобы получать эти данные посредством сервиса подписки.

_Алгоритм проверки._ Полнота и корректность предоставляемых данных проверяется с использованием автоматических средств сверки.
________________________________________

## Alfa Private (__АП__)
### АП1. Операции приоритетных клиентов
***Затронутые задачи: #117, #116, #80, #Ф5, #Ф6, #Ф8***

_Контекст._ В рамках процессов Alfa-Private часто возникает необходимость отвечать на запросы приоритетных клиентов. Среди наиболее частых вопросов можно выделить следующие: какие операции происходили на банковских / брокерских / ДУ счетах клиента за заданный период и сколько средств заработал для клиента Банк. Ответ на запросы таких клиентов требуется предоставлять максимально точно и оперативно. Данные, необходимые для ответа на эти вопросы, включают следующую информацию:
*	Движения бумаг и денег по счетам клиента (вводы и выводы);
*	Сделки клиента (включая результат закрытых сделок и market value открытых сделок с деривативами);
*	Начисленные и уплаченные налоги / комиссии / вознаграждения;

Данные сделки присутствуют в различных deal-capture системах (OPICS, FOCUS, …), поэтому имеют различный атрибутивный состав; кроме того, принятые обозначения некоторых атрибутов (например, финансовых инструментов), также различаются в пределах разных deal-capture систем.

_Решение._ Существующее решение заключается в ручной выгрузке сделок из нужных источников / запросе отчетности и агрегировании данных в Excel-файл. В силу различий между объектными моделями систем-источников и разностью учета операций, возникает необходимость в ручном сведении данных и проведении расчетов вручную (отбор общих полей, унификация названий финансовых инструментов и т.д.), что выливается в трудозатраты и получение неверной итоговой информации. Кроме того, экспертиза по правильному обращению с Excel-файлом, как правило, присутствует у ограниченного числа сотрудников, что выливается в задержки и риск дополнительных операционных ошибок, особенно в случае ухода такого сотрудника в отпуск.

Предлагаемое решение: создать виджет системы IB-DashBoard, который будет интегрирован с Транзакционным ядром. Виджет будет отображать в виде таблицы следующие данные:
*	сделки из разных систем-источников, приведенные к единой модели;
*	актуальный market value этих сделок – __при условии наличия «Аналитического модуля», который производит расчет market value__;
*	информация по налоговым начислениям и вычетам – __при условии наличия этих данных из учетной системы-источника этой информации__;

Виджет будет также иметь возможность выгрузки этой информации в формате MS Excel.

_Алгоритм проверки._ Проверка полноты данных, предоставляемых посредством виджета, осуществляется сотрудником Alfa-Private.
________________________________________

## Управление рынков и акций (__УРА__)
### УРА1. Операции приоритетных клиентов
***Затронутые задачи: #117, #116, #80, #Ф5, #Ф6, #Ф8***

_Контекст._ Клиенты Управления рынков и акций имеют активы, хранящиеся в депозитарии или на брокерских счетах. Основная масса таких счетов находится в Альфа-Директе и Альфа Private. Также в УРА существуют институциональные клиенты (УК, фонды и т.п.) которые по характеру отношений являются контрагентами, так как не хранят в Банке свои активы и обладают самостоятельными бэк-офисами внутри себя.

В рамках процессов Управления рынков и акций часто возникает необходимость отслеживать движения средств клиентов (вводы и выводы денег и бумаг на счетах клиента), а также их сделки (включая результат закрытых сделок и актуальную рыночную стоимость открытых сделок с деривативами). Сделки клиентов УРА присутствуют в различных deal-capture системах (Альфа-Директ, FOCUS, OPICS, …), поэтому имеют различный атрибутивный состав; кроме того, принятые обозначения некоторых атрибутов (например, финансовых инструментов), также различаются в пределах разных deal-capture систем.

_Решение._ Существующее решение заключается в ручной выгрузке сделок из нужных источников в Excel-файл. В силу различий между объектными моделями систем-источников, возникает необходимость в ручном сведении данных (отбор общих полей, унификация названий финансовых инструментов и т.д.), что выливается в трудозатраты и риск операционных ошибок.Предлагаемое решение: создать виджет системы IB-DashBoard, который будет интегрирован с Транзакционным ядром. Виджет будет отображать в виде таблиц следующие данные:
1.	сделки клиентов из разных систем-источников, приведенные к единой модели;
2.	движение средств и активов по собственному портфелю ценных бумаг;
3.	движение средств и активов по счетам клиента/контрагента;

Во всех перечисленных случаях также требуется возможность отбора и фильтрации данных следующими способами:
*	по названию/типу инструмента;
*	на дату;
*	за период;

Также требуется предоставлять рассчет PnL по данным категориям – это возможно только при условии наличия «Аналитического модуля», который производит этот расчет и транслирует его в Транзакционное ядро.
Виджет будет также иметь возможность выгрузки этой информации в формате MS Excel.

_Алгоритм проверки._ Проверка корректностии полноты предоставленной информации производится сотрудником Управления рынков и акций путем сверки данных из виджета с существующими Excel-файлами.
________________________________________

## Отдел деривативов (__ОД__)
### ОД1. SQL-подобный интерфейс
***Затронутые задачи: #Ф1***

_Контекст._ В рамках процессов ОД часто возникает потребность выгрузки собственных сделок из учетных систем (главным образом FOCUS, но потенциально могут быть и другие). Модели сделок в этих системах значительно отличаются, что приводит к трудозатратам по приведению их к единому виду.

_Решение._ Текущее решение – ручная выгрузка из учетных систем с последующим сведением их к единой модели.
Предлагаемое решение – создание SQL-подобного интерфейса для обращения к данным Транзакционного ядра, где хранятся все собственные сделки ОД из учетных систем, приведенные к единой объектной модели. Ограничение: для работы SQL-интерфейса потребуется разработка ролевой модели доступа к данным Транзакционного ядра.

_Алгоритм проверки._ Проверка интерфейса осуществляется сотрудником ОД путем сравнения результатов запроса с результатами ручных выгрузок.

### ОД2. Блоттер со сделками клиентов ОД
***Затронутые задачи: #Ф1***

_Контекст._ В рамках процессов ОД часто возникает необходимость видеть все сделки своих клиентов. Данные сделки присутствуют в различных deal-capture системах (OPICS, FOCUS, …), поэтому имеют различный атрибутивный состав; кроме того, принятые обозначения некоторых атрибутов (например, финансовых инструментов), также различаются в пределах разных deal-capture систем.

_Решение._ Существующее решение заключается в ручной выгрузке сделок из нужных источников в Excel-файл. В силу различий между объектными моделями систем-источников, возникает необходимость в ручном сведении данных (отбор общих полей, унификация названий финансовых инструментов и т.д.), что выливается в трудозатраты.

Предлагаемое решение: создать экранную форму в виде блоттера, на которой представлены сделки из Транзакционного ядра. В Транзакционное ядро попадают сделки из всех deal-capture систем, и хранятся в единой объектной модели. Таким образом, в блоттере будут все сделки клиентов ОД, и будет возможность выгрузки этой информации в формате MS Excel. Включение сделки в перечень отображаемых будет зависеть от ролевой модели.

_Алгоритм проверки._ Проверка корректности предоставленной информации производится сотрудником ОД путем сверки данных из блоттера с результатами ручных выгрузок.

### ОД3. Сводный позиционный отчет
***Затронутые задачи: #117, #Ф8***

_Контекст._ В рамках процессов ОД требуется создание сводного позиционного отчета по деску.

_Решение._ В настоящее время обработка данных происходит при помощи системы FOCUS, поэтому данный кейс не является высокоприоритетным.
Предлагаемое решение: создать экранную форму в виде блоттера, на котором в виде таблицы будет представлен сводный позиционный отчет по деску. Отчет будет содержать расчетом PL, и будет построен по сделкам из всех учетных систем IB. Блоттер будет иметь возможность выгрузки информации в формате MS Excel.

Необходимым условием реализации этого кейса является наличие «Аналитического модуля», который может рассчитывать market value и будет интегрирован с Транзакционным ядром.

_Алгоритм проверки._ Проверка корректности работы механизма производится сотрудником ОД путем сверки отчета из блоттера с результатами отчетов, создаваемых вручную.

### ОД4. Расчет риск-профайлов
***Затронутые задачи: #117, #Ф8***

_Контекст._ Риск-профайлы отражают изменение стоимости сделки в зависимости от изменения некоторых параметров (например, курса валют). Таким образом, позиционный отчет, отражающий величины рисков при текущих условиях, может быть дополнен риск-профайлами, предсказывающими изменение рисков в случае изменений некоторых параметров.

_Решение._ В настоящий момент времени у Отдела деривативов уже есть возможность строить зависимость цены сделки от какого-либо параметра, поэтому данный кейс не является высокоприоритетным.

Предлагаемое решение: создать экранную форму, на которой в виде графика отображалось бы изменение стоимости портфеля сделок в зависимости от изменения какой-либо переменной. Требуется также возможность отображения трехмерных графиков на случай зависимости стоимости портфеля от двух переменных. Механизм должен допускать возможность выбора переменных, влияющих на стоимость портфеля, и возможность выгрузки отображаемой информации.
У данного кейса есть два необходимых условия реализации:
*	Наличие «Аналитического модуля», который может рассчитывать market value и будет интегрирован с Транзакционным ядром;
*	Разработка отдельного модуля для вычисления риск-профайлов на основе данных, предоставляемых Транзакционным ядром и Аналитическим модулем.

_Алгоритм проверки._ Проверка корректности работы механизма производится сотрудником ОД вручную.
________________________________________

## Комплаенс (__К__)
### К1. Контроль за сделками с американскими бумагами/производными финансовыми инструментами
***Затронутые задачи: #117, #116***

_Контекст._ Контроль за сделками с американскими бумагами/производными финансовыми инструментами, включая сведения о выплаченных доходах (например, кор. действие). На регулярной основе требуется инструмент для выгрузки всех сделок ИБ с указанием стороны по сделки, FATCA статуса клиента/контрагента, указания американского инструмента, иные параметры сделки. Для чего - контроль за исполнением нормативных требований FATCA.

_Решение._ На текущий момент нет единого источника информации, отчет можно выгрузить только из SMART, в Альфа-Директе/Депонет необходимых инструментов для выгрузки нет.

Предлагаемое решение: подключить системы-источников к Транзакционному ядру, которое становится единым источником информации для целей кейса. Необходимым пререквизитом является добавление в LE всех недостающих клиентов и контрагентов из систем-источников, указанных в кейсе.

_Алгоритм проверки._ Сравнение с ручной выгрузкой из имеющихся систем.

### К2. Отчет в уполномоченные органы РФ и США
***Затронутые задачи: #117, #116, #Ф5***

_Контекст._ Отчет по клиентам/контрагентам за календарный год для целей направления отчета в уполномоченные органы РФ, США, нормативные требования. Данные направляются по иностранным налоговым резидентам. Отчет включает персональные данные (ФИО, Наименование, адрес, ПИН), сведения об открытых счетах, остатках средств на счетах, информацию о выплаченных доходах, иную информацию.

_Решение._ На текущий момент готового решения нет, отчет собирается руками по выгрузкам из различных источников: Альфа-Директ, Депонет, SMART, Opics, EQ. Требуется единый источник информации.

Предлагаемое решение: подключить системы-источников к Транзакционному ядру, которое становится единым источником информации для целей кейса. Необходимым пререквизитом является добавление в LE всех недостающих клиентов и контрагентов из систем-источников, указанных в кейсе.

_Алгоритм проверки._  Сравнение с ручной выгрузкой из имеющихся систем.

### К3. 224-ФЗ
***Затронутые задачи: #117, #116, #Ф7***

_Контекст._ Требования Закона 224-ФЗ (ПНИИИ/МР) предполагают необходимость реализации в Банке мер выявления и предотвращения неправомерного использования инсайдерской информации Банком, его работниками и клиентами. Механизм выявления неправомерного использования информации строится в большей своей части на выявлении и анализе соответствующих сделок. В настоящее время указанные меры реализуются Контролером, УСП ДК, УМК ДК, единого программного обеспечения для контроля всех сделок нет, а существующее не содержат всех необходимых данных (совокупности всех сделок, статуса/маркировки клиента как работника Банка, маркировки фин. инструментов по комплаенс-спискам, возможности выгрузки данных сделок по необходимым фильтрам).

_Решение._ В настоящее время указанная выше задача решается в большей степени ручном режиме путем выгрузки данных из систем ИБ с последующим отбором сделок по вручную ведущимся спискам клиентов-работников, финансовым инструментам.  В текущей схеме реализации задачи сохраняются значительные регуляторные риски, связанные с недостаточным качеством и оперативностью контроля сделок в рамках ПНИИИ/МР   – ст. 15.21 КоАП (от 700 тыс р.)  и п. 4 ст. 15.35 КоАП (от 300 до 700 тыс. руб.) на Банк за каждое нарушение.
Требуется учет в едином Ядре информации о клиентах-работниках Банка, а также возможность строить выгрузки о совершенных сделках: 1) по списку клиентов-работников Банка; 2) по списку (загружаемому) клиентов; 3) по списку (загружаемому) эмитентов; 4) по списку (загружаемому; Stop-List, Watch-list) финансовых инструментов, что позволит значительно повысить качество мер в целях ПНИИИ/МР.

Предлагаемое решение: для целей данного кейса необходимо выполнение двух необходимых пререквизитов:
*	Требуется добавление в систему LE всех недостающих клиентов;
*	Требуется добавление в систему LE нового параметра «Сотрудник», которые заполняется автоматически на основе признака «Грейд» в системе Equation.

_Алгоритм проверки._ Оценка качества и полноты сведений о сделках, содержащихся в отчетах из системы (ядра), будет осуществляться на основе сравнения полученных данных с данными отчетов, получаемых в настоящее время вручную.

### К4. Отчет по прохождению комплаенс-контроля
***Затронутые задачи: #116, #117***

_Контекст._ В виду того, что транзакционное ядро будет аккумулировать в себе всю информацию из систем ИБ то нам будет полезно иметь обобщенный отчет о сделках/транзакциях/операциях, которые проходили комплаенс контроль в части санкционных/страновых ограничений содержащий информацию о системе в которой производился контроль, о причинах возникновения контроля, о результатах контроля и т.д.

_Решение._ В настоящее время задача будет решаться в каждой конкретной системе. Автоматический алгоритм оценивает, требует ли сделка дополнительной проверки сотрудником комплаенса, и проставляет об этом метку в системе-источнике. После этого планировалось выгружать сделки по отдельности из каждой системы.

Предлагаемое решение: подключение всех указанных систем к Транзакционному ядру, что позволит получать агрегированную информацию из одного источника и в дальнейшем, при изменении параметров контролей не дорабатывать каждую систему в части отчетности.

_Алгоритм проверки._ Удостовериться в том, что поставленная задача решена успешно мы сможем, используя выгрузки из всех дорабатываемых систем сравнив их с агрегированным отчетом из транзакционного ядра

### К5. Выгрузка сделок РЕПО
***Затронутые задачи: #117, #116***

_Контекст._  Выгрузить все сделки РЕПО с контрагентами (например, Сбербанк, ВТБ, Россельхозбанк, ВЭБ).

_Решение._ Получаем отчет с параметрами всех сделок РЕПО заключенных в указанный период.

_Алгоритм проверки._ Сотрудник ДК указывает параметры выгрузки: (1) период (2) контрагент/клиент (3) код риска контрагент/клиент (81,82, 83 и др.)  (3) валюта (4) направление (5) ОТС/ММВБ

### К6. Сделки с санкционными ценными бумагами
***Затронутые задачи: #117, #116, #80, #Ф5***

_Контекст._  Выгрузить все сделки с санкционными ценными бумагами

_Решение._ Требуется иметь возможность получать отчет с параметрами всех сделок заключенных в указанный период. В качестве инструмента обращения к данным можно предложить виджет системы IB-Dashboard, который в виде таблицы отображает сделки в Транзакционном ядре (с возможностью выгрузки в Excel).

_Алгоритм проверки._ Сотрудник ДК указывает параметры выгрузки: (1) период (2) все/выбор типа транзакции/сделки с ценными бумагами с маркировкой sanctioned (3) выбор ценной бумаги/ все с маркировкой sanctioned (4) ОТС/ММВБ

### К7. Выявление подозрительных транзакций
***Затронутые задачи: #117, #116, #Ф6, #Ф8***

_Контекст._  Мониторинг транзакций клиентов ИБ (выявление suspicious transactions) - 445П.

_Решение._ В настоящий момент мониторинг операций осуществляется в 4-х разных системах ИБ, которые слабо коррелируют друг с другом, что снижает эффективность выявления подозрительных операций. Отсутствует агрегированный портфель/позиция клиента в рамках разных продуктов ИБ. Транзакционное ядро позволит комплексно смотреть на операции клиента и эффективно осуществлять мониторинг его деятельности в рамках ИБ. Бизнес-процесс, требования к структуре данных, критерии необходимые для мониторинга операций заложены в бизнес-требованиях.

Предлагаемое решение - виджет системы IB-Dashboard, который в виде таблицы отображает сделки клиентов из различных систем, а также агрегированную информацию по ним. Виджет будет иметь возможность выгрузки в Excel.

_Алгоритм проверки._ Консистентность данных проверяется наличием параметров и
глубины, которые заложены в требованиях, а также сравнением с выгрузкой операций, которые сделаны из систем ИБ в ручном режиме.
